{% extends 'base.html' %}
{% block contenido %}
<div class="modulo">
    <h2>Panel de Configuración</h2>

    <!-- ==== USUARIOS ==== -->
    <h3>Usuarios</h3>
    <a href="{{ url_for('nuevo_usuario') }}" class="btn btn-success mb-2">+ Nuevo Usuario</a>
    <table class="table table-sm">
        <thead>
            <tr><th>Usuario</th><th>Rol</th><th>Acciones</th></tr>
        </thead>
        <tbody>
        {% for u in usuarios %}
            <tr>
                <td>{{ u['usuario'] }}</td>
                <td>{{ u['rol'] }}</td>
                <td>
                    <a href="{{ url_for('editar_usuario', id=u['id']) }}" class="btn btn-sm btn-warning">Editar</a>
                    <a href="{{ url_for('eliminar_usuario', id=u['id']) }}" class="btn btn-sm btn-danger" onclick="return confirm('¿Seguro que deseas eliminar este usuario?')">Eliminar</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <!-- ==== EMPLEADOS ==== -->
    <h3>Empleados</h3>
    <a href="{{ url_for('nuevo_empleado') }}" class="btn btn-success mb-2">+ Nuevo Empleado</a>
    <table class="table table-sm">
        <thead>
            <tr><th>Nombre</th><th>Área</th><th>Estado</th><th>Acciones</th></tr>
        </thead>
        <tbody>
        {% for e in empleados %}
            <tr>
                <td>{{ e['nombre'] }}</td>
                <td>{{ e['area'] }}</td>
                <td>{{ e['estado'] }}</td>
                <td>
                    <a href="{{ url_for('editar_empleado', id=e['id']) }}" class="btn btn-sm btn-warning">Editar</a>
                    <a href="{{ url_for('eliminar_empleado', id=e['id']) }}" class="btn btn-sm btn-danger" onclick="return confirm('¿Seguro que deseas eliminar este empleado?')">Eliminar</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <!-- ==== OBRAS ==== -->
    <h3>Obras</h3>
    <a href="{{ url_for('nueva_obra') }}" class="btn btn-success mb-2">+ Nueva Obra</a>
    <table class="table table-sm">
        <thead>
            <tr><th>Nombre</th><th>Estado</th><th>Nota</th><th>Acciones</th></tr>
        </thead>
        <tbody>
        {% for o in obras %}
            <tr>
                <td>{{ o['nombre'] }}</td>
                <td>{{ o['estado'] }}</td>
                <td>{{ o['nota'] }}</td>
                <td>
                    <a href="{{ url_for('editar_obra', id=o['id']) }}" class="btn btn-sm btn-warning">Editar</a>
                    <a href="{{ url_for('eliminar_obra', id=o['id']) }}" class="btn btn-sm btn-danger" onclick="return confirm('¿Seguro que deseas eliminar esta obra?')">Eliminar</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <!-- ==== ÁREAS DE TRABAJO / CHECKLIST ==== -->
    <h3>Áreas de Trabajo / Checklist</h3>
    <a href="{{ url_for('nueva_area') }}" class="btn btn-success mb-2">+ Nueva Área</a>
    <table class="table table-sm">
        <thead>
            <tr><th>Área</th><th>Obra</th><th>Checklist (tareas)</th><th>Acciones</th></tr>
        </thead>
        <tbody>
        {% for a in areas %}
            <tr>
                <td>{{ a['nombre'] }}</td>
                <td>{{ a['obra_id'] }}</td>
                <td><pre>{{ a['checklist'] }}</pre></td>
                <td>
                    <a href="{{ url_for('editar_area', id=a['id']) }}" class="btn btn-sm btn-warning">Editar</a>
                    <a href="{{ url_for('eliminar_area', id=a['id']) }}" class="btn btn-sm btn-danger" onclick="return confirm('¿Seguro que deseas eliminar esta área?')">Eliminar</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <!-- Anuncios globales y otros controles a futuro -->

</div>
{% endblock %}
